#!/bin/sh

CC=${CC:-/bin/cc}
PREFIX=${PREFIX:-/usr/local}
BINDIR="$PREFIX/bin"
DOCDIR="$PREFIX/share/manex/docs"

ZSH_COMP="#compdef manex
#generated by configure

typeset -A opt_args
AAA=(\$words[2,-1])
AAA=\${(j:/:)AAA}
if [[ \$words[-1] == '' ]]; then
    PRE=($DOCDIR/\$AAA/*)
else
    PRE=($DOCDIR/\$AAA*)
fi
for x in \$PRE; do
    compadd \$(basename \$x)
done"

CONFIG="#generated by configure

CC=$CC
BINDIR=$BINDIR
DOCDIR=$DOCDIR"

echo "$CONFIG" > config.mk
echo "$ZSH_COMP" > ./contrib/_manex
